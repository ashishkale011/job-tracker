{% extends 'base.html' %}
{% load widget_tweaks %}

{% block title %}{{ edit|default:"Add" }} Job Application{% endblock %}

{% block content %}
<!-- 🌟 Style -->
<style>
  body {
    background: linear-gradient(to right, #e0eafc, #cfdef3);
  }

  .glass-form {
    backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.75);
    border-radius: 1rem;
    padding: 35px;
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease-in-out;
  }

  .glass-form:hover {
    transform: translateY(-3px);
  }

  .form-title {
    font-size: 26px;
    font-weight: 600;
    color: #333;
    text-align: center;
    margin-bottom: 25px;
  }

  .icon-label {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 500;
  }

  .icon-label i {
    color: #0d6efd;
  }

  .btn-success, .btn-outline-secondary {
    min-width: 120px;
  }

  /* Media tweaks */
  @media (max-width: 576px) {
    .submit-btns {
      flex-direction: column;
      gap: 10px;
    }
  }
</style>

<!-- 🌐 Content Layout -->
<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-lg-8 col-md-10">
      <div class="glass-form">

        <!-- ✅ Form Title -->
        <h2 class="form-title">
          {{ edit|default:"Add" }} Job Application
        </h2>

        <!-- 🔔 Alert Messages -->
        {% if messages %}
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          {% endfor %}
        {% endif %}

        <!-- 🧾 Form Start -->
        <form method="post" enctype="multipart/form-data">
          {% csrf_token %}

          <!-- Job Title -->
          <div class="mb-3">
            <label class="form-label icon-label">
              <i class="fas fa-briefcase"></i> Job Title
            </label>
            {{ form.job_title }}
          </div>

          <!-- Company Name -->
          <div class="mb-3">
            <label class="form-label icon-label">
              <i class="fas fa-building"></i> Company Name
            </label>
            {{ form.company_name }}
          </div>

          <!-- Location -->
          <div class="mb-3">
            <label class="form-label icon-label">
              <i class="fas fa-map-marker-alt"></i> Location
            </label>
            {{ form.location }}
          </div>

          <!-- Date Applied -->
          <div class="mb-3">
            <label class="form-label icon-label">
              <i class="fas fa-calendar-alt"></i> Date Applied
            </label>
            {{ form.date_applied }}
          </div>

          <!-- Status -->
          <div class="mb-3">
            <label class="form-label icon-label">
              <i class="fas fa-info-circle"></i> Status
            </label>
            {{ form.status }}
          </div>

          <!-- Resume Sent -->
          <div class="form-check form-switch mb-3">
            {{ form.resume_sent }}
            <label class="form-check-label icon-label" for="{{ form.resume_sent.id_for_label }}">
              <i class="fas fa-paper-plane"></i> Resume Sent
            </label>
          </div>

          <!-- Notes -->
          <div class="mb-3">
            <label class="form-label icon-label">
              <i class="fas fa-sticky-note"></i> Notes
            </label>
            {{ form.notes }}
          </div>

          <!-- Resume File -->
          <div class="mb-4">
            <label class="form-label icon-label">
              <i class="fas fa-upload"></i> Resume File
            </label>
            {{ form.resume_file }}
          </div>

          <!-- ✅ Button Actions -->
          <div class="d-flex justify-content-between align-items-center submit-btns mt-4">
            <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary">
              Cancel
            </a>
            <button type="submit" class="btn btn-success submit-btn">
              {{ edit|yesno:"Update,Submit" }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- ✅ Font Awesome CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
{% endblock %}